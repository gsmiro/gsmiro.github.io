<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="bs-scripts.html">
<link rel="import" href="bs-timeline-entry.html">

<dom-module id="bs-timeline">
    <template>
        <style>
            :host #line {
                border-left: 3px solid lightgray;
            }
            :host > div.row {
                @apply(--bs-timeline-background);
            }
        </style>
        <div class="row">
            <div class="col-md-1">
            </div>
            <div id="line" class="col-md-11">
                <bs-timeline-entry
                                   date="{{now}}"
                                   title="{{title}}"
                                   subtitle="{{subtitle}}"
                                   heading="{{heading}}"
                                   description="{{description}}"
                                   row-class="blink {{rowClass}}"
                                   date-col-class="{{dateColClass}}"
                                   label-col-class="{{labelColClass}}">
                    </bs-timeline-entry>
                                   
                <template is="dom-repeat" items="{{items}}">
                    <bs-timeline-entry
                                   date="{{item.date}}"
                                   title="{{item.title}}"
                                   subtitle="{{item.subtitle}}"
                                   heading="{{item.heading}}"
                                   heading-label="{{labels.heading}}"
                                   description="{{item.description}}"
                                   row-class="{{rowClass}}"
                                   date-col-class="{{dateColClass}}"
                                   label-col-class="{{labelColClass}}">
                    </bs-timeline-entry>    
                </template>
            </div>
        </div>
        <div id="waypoint" class="row"></div>
    </template>
    <script>
        Polymer({
            is: 'bs-timeline',
            properties: {
                rowClass: {
                    type: String,
                    value: 'row'
                },
                dateColClass: {
                    type: String,
                    value: 'col-xs-1'
                },
                labelColClass: {
                    type: String,
                    value: 'col-xs-11'
                },
                items: {
                    type: Array
                },
                labels:{
                    type: Object,
                    value: {
                        heading:''
                    }
                },
                now: {
                    type: String,
                    value: 'now'
                },
                title: {
                    type: String,
                    value: ''
                },
                subtitle: {
                    type: String,
                    value: ''
                },
                heading: {
                    type: String,
                    value: ''
                },
                description: {
                    type: String,
                    value: ''
                }
            },
            attached: function(){
                let _this = this;
                new Waypoint({
                  element: this.$$('#waypoint'),
                  handler: function(dir){
                      console.log(dir);
                  }
                })  
            }
        });
        
    </script>

</dom-module>